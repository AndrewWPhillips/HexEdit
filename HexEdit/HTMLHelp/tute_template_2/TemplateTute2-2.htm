<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">

<html>

<!--(==============================================================)-->
<!--(Document created with RoboEditor. )============================-->
<!--(==============================================================)-->

<head>

<title>Creating the Header</title>

<!--(Meta)==========================================================-->

<meta http-equiv=content-type content="text/html; charset=windows-1252">
<meta name=generator content="RoboHELP by eHelp Corporation - www.ehelp.com">
<meta name=generator-major-version content=0.1>
<meta name=generator-minor-version content=1>
<meta name=filetype content=kadov>
<meta name=filetype-version content=1>
<meta name=page-count content=1>
<meta name=layout-height content=2903>
<meta name=layout-width content=1213>


<!--(Links)=========================================================-->

<link rel="StyleSheet" href="..\Hexedit.css">



</head>

<!--(Body)==========================================================-->


<body>

<h2 style="font-family: Arial;">Step 2: Creating the Header</h2>

<p style="margin-top: 0; margin-bottom: 0;">&nbsp;</p>

<p style="margin-top: 0; margin-bottom: 0;">You should still have the example 
 file open from the previous step.</p>

<p style="margin-top: 0; margin-bottom: 0;">&nbsp;</p>

<p class=Body-Text-Indent-2>1. With the &quot;TUTORIAL.HEG&quot; file open 
 make sure the &quot;default&quot; template is selected.</p>

<p>&nbsp;</p>

<p style="font-weight: bold;">Creating the Structure</p>

<p>&nbsp;</p>

<p>The first step is to create the template header.</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>2. Expand the root (&quot;Default&quot;) node 
 and right-click the &quot;none&quot; node and select &quot;Insert/Struct...&quot;.</p>

<p class=Body-Text-Indent-2>3. Give the STRUCT the name &quot;header&quot; 
 and then click the &quot;Insert&quot; button and select &quot;Data...&quot; 
 from the list.</p>

<p class=Body-Text-Indent-2>4. Call the new data element &quot;magic&quot; 
 and make it a 32 bit unsigned integer (type=&quot;integer&quot;, format=&quot;unsigned&quot;, 
 length=&quot;4&quot;).</p>

<p>&nbsp;</p>

<p>The magic number is always 16071958 (hex). <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Using 
 the special identifier &quot;this&quot; we can check that the magic value 
 is correct.</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>5. Type &quot;this == 0x16071958&quot; in the 
 domain field.</p>

<p>&nbsp;</p>

<p><img src="../tip.gif"
		style="border-style: none;
				border: none;
				width: 31px;
				height: 12px;"
		width=31
		height=12
		border=0>The expression in the domain field must always return 
 a boolean result. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->The 
 only operators that return boolean values are comparison operators (==, 
 &lt;, etc) and boolean operators (&amp;&amp;, ||, !). <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Of 
 course, you can use any operators as long as the final result of the expression 
 is boolean.</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>6. Enter &quot;hex&quot; in the display field.</p>

<p class=Body-Text-Indent-2>&nbsp;</p>

<p>This means the number will be displayed in the &quot;Data&quot; column 
 of the tree window in hexadecimal. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Alternative 
 values for the display field are &quot;dec&quot;, &quot;oct&quot;, &quot;bin&quot;, 
 or any printf integer format specification like &quot;%5d&quot;. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->If 
 left empty the default is decimal which gives numbers nicely formatted 
 for the current regional settings (eg, comma-separated, 3-digit groups).</p>

<p>&nbsp;</p>

<p style="text-align: center;"
	align=center><img src="tute2_2_1.gif"
						style="border-style: none;
								border: none;
								width: 444px;
								height: 301px;"
						width=444
						height=301
						border=0><span style="font-weight: bold;"><br>
<br>
Figure 1. DATA Element dialog.</span></p>

<p>&nbsp;</p>

<p>We have finished this data field, so we will save it and create a copy 
 of it using the &quot;Clone &gt;&gt;&quot; button. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->This 
 updates the DATA element (just like clicking the OK button) and then creates 
 a copy of it in the parent STRUCT and opens it for editing.</p>

<p>&nbsp;</p>

<p>The new element will store the address of the colour table. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->(It 
 will later be moved to its correct position after the date fields.) <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Since 
 this is also a 32 bit integer you just need to change the name to &quot;col_table_address&quot; 
 and delete the domain test. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Then 
 we will create two date fields after the table address.</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>7. Click the &quot;Clone &gt;&gt; Button.</p>

<p class=Body-Text-Indent-2>8. Change the name from &quot;copy_of_magic&quot; 
 to &quot;col_table_address&quot; and delete the contents of the &quot;Domain&quot; 
 field.</p>

<p class=Body-Text-Indent-2>9. Click &quot;Clone &gt;&gt;&quot; again and 
 set the name of the new field to &quot;created&quot; and the type to &quot;date&quot; 
 and format to &quot;normal time_t&quot;.</p>

<p class=Body-Text-Indent-2>10. Delete &quot;hex&quot; from the &quot;Display&quot; 
 field (so it is blank) to use the default date formatting.</p>

<p class=Body-Text-Indent-2>11. Click &quot;Clone &gt;&gt;&quot; again 
 and (since this is another date field) just change the name to &quot;modified&quot; 
 and click &quot;OK&quot;.</p>

<p>&nbsp;</p>

<p>Back in the &quot;STRUCT&quot; dialog you should have four elements. 
 <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->However, 
 the &quot;col_table_address&quot; needs to be at the bottom. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->We 
 can reorder the elements using the up and down arrow buttons <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->(the 
 buttons in the dialog not the arrow keys on the keyboard).</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>12. Select the &quot;col_table_address&quot; 
 element then click the down arrow button twice to move it to the end of 
 the element list.</p>

<p>&nbsp;</p>

<p>Note the &quot;Elt size&quot; and &quot;Offset&quot; values in the STRUCT 
 dialog give information for the currently selected element. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Since 
 &quot;col_table_address&quot; is currently selected this should now show 
 an element size of 4 and an offset of 12. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Selecting 
 the blank element at the end of the list should show an Offset of 16 which 
 is the total size of the STRUCT.</p>

<p>&nbsp;</p>

<p style="text-align: center;"
	align=center><img src="tute2_2_2.gif"
						style="border-style: none;
								border: none;
								width: 444px;
								height: 301px;"
						width=444
						height=301
						border=0><span style="font-weight: bold;"><br>
<br>
Figure 2, STRUCT dialog.</span></p>

<p>&nbsp;</p>

<p><img src="../tip.gif"
		style="border-style: none;
				border: none;
				width: 31px;
				height: 12px;"
		width=31
		height=12
		border=0>If an element in a STRUCT is of variable size (ie contains 
 an IF element or a FOR element not of fixed size) then the element size 
 is not known and will be shown as a question mark (?). <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Moreover, 
 the offsets of all following element will also be unknown and displayed 
 the same way.</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>13. Click OK to save the changes and close 
 the &quot;header&quot; STRUCT dialog..</p>

<p class=body-text-indent-2>&nbsp;</p>

<p style="font-weight: bold;">Saving the Template</p>

<p>&nbsp;</p>

<p>Now would be a good time to save the template. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->But 
 first we will tidy a few things up.</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>14. Edit the root node by double-clicking it 
 and change the name to something like &quot;HEG_file&quot;.</p>

<p class=Body-Text-Indent-2>15. You can also add a comment like &quot;This 
 is just an example format used in the HexEdit Advanced templates tutorial&quot;.</p>

<p class=Body-Text-Indent-2>16. We no longer need the &quot;none&quot; 
 element so select it and click the delete <img src="../dlg_options/del_ico.gif"
												style="border-style: none;
														border: none;
														width: 22px;
														height: 23px;"
												width=22
												height=23
												border=0> button and click 
 &quot;Yes&quot; when it asks to confirm.</p>

<p class=Body-Text-Indent-2>17. Click OK to keep the changes and close 
 the STRUCT dialog.</p>

<p class=Body-Text-Indent-2>18. Now, right-click the root node and select 
 the &quot;Options...&quot; menu item.</p>

<p class=Body-Text-Indent-2>&nbsp;</p>

<p>This invokes a dialog that allows you to edit the global options for 
 the template.</p>

<p>&nbsp;</p>

<p>The &quot;Read-Only&quot; checkbox prevents the users of the template 
 from changing DATA elements when the template is in use, but may be overridden 
 in particular DATA elements. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->This 
 gives a great deal of flexibility in restricting changes to the file.</p>

<p>&nbsp;</p>

<p>For example, you can protect the whole file but just allow a few fields 
 to be changed by setting the global read-only flag then clearing it for 
 those specific fields.</p>

<p>&nbsp;</p>

<p>The &quot;Big-Endian&quot; checkbox affects the byte order used for 
 relevant DATA elements (numeric, some date formats and Unicode text). 
 <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Like the 
 &quot;Read-Only&quot; checkbox it can be overridden for specific fields, 
 which allows you to easily handle files that contain data with different 
 byte orders.</p>

<p>&nbsp;</p>

<p>The &quot;Default Character Set&quot; says what character set is used 
 to display string and character fields. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->Again 
 this can be overridden for specific fields, so you can handle files that 
 contain text using different character sets.</p>

<p>&nbsp;</p>

<p>Finally, you can enter a web address so the user can find out more information 
 about the data format handled by the template. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->We 
 have set up such a web page for this tutorial.</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>19. Enter &quot;http://hexedit.com/tutorial_format.html&quot;.</p>

<p class=Body-Text-Indent-2>20. Click the &quot;Check&quot; button to if 
 you are connected to the Internet. <!--kadov_tag{{<spaces>}}-->&nbsp;<!--kadov_tag{{</spaces>}}-->This 
 will open the page in your web browser.</p>

<p class=Body-Text-Indent-2>21. Click OK</p>

<p>&nbsp;</p>

<p style="text-align: center;"
	align=center><img src="tute2_2_3.gif"
						style="border-style: none;
								border: none;
								width: 444px;
								height: 210px;"
						width=444
						height=210
						border=0></p>

<p style="text-align: center;"
	align=center>&nbsp;</p>

<p style="text-align: center; font-weight: bold;"
	align=center>Figure 3. Global Options dialog.</p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>22. Save the template by right-clicking the 
 root node and selecting the &quot;Save As...&quot; menu item.</p>

<p class=Body-Text-Indent-2>&nbsp;</p>

<p style="text-align: center;"
	align=center><img src="tute2_2_4.gif"
						style="border-style: none;
								border: none;
								width: 514px;
								height: 396px;"
						width=514
						height=396
						border=0><span style="font-weight: bold;"><br>
<br>
Figure 4. Saving the template.</span></p>

<p>&nbsp;</p>

<p class=Body-Text-Indent-2>23. Enter the name &quot;_HEG&quot; in the 
 File Save dialog and click the Save button.</p>

<p>&nbsp;</p>

<p>By using this name (an underscore followed by &quot;HEG&quot;) any .HEG 
 that is opened in the future will use this template (unless it has already 
 been opened and a different template was used).</p>

<p>&nbsp;</p>

<p>In the next part of the tutorial we tackle the hard part -- creation 
 of the graphical objects themselves.</p>

<p>&nbsp;</p>

<p style="text-align: center;"
	align=center><a HREF="TemplateTute2-1.htm"><img src="../back.gif"
													style="border-style: none;
															border: none;
															width: 51px;
															height: 22px;"
													width=51
													height=22
													border=0></a> <!--kadov_tag{{<spaces>}}-->&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a 
 HREF="TemplateTute2-3.htm"><!--kadov_tag{{</spaces>}}--><img src="../next.gif"
	style="border-style: none;
			border: none;
			width: 51px;
			height: 22px;"
	width=51
	height=22
	border=0></a></p>

<p>&nbsp;</p>

</body>

</html>
